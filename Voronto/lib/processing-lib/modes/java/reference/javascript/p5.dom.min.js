/*! p5.dom.js v0.2.6 November 10, 2015 */
(function(a,b){if(typeof define==="function"&&define.amd){define("p5.dom",["p5"],function(c){(b(c))})}else{if(typeof exports==="object"){b(require("../p5"))}else{b(a.p5)}}}(this,function(b){b.prototype.select=function(k,j){var i=null;var h=g(j);if(k[0]==="."){k=k.slice(1);i=h.getElementsByClassName(k);if(i.length){i=i[0]}else{i=null}}else{if(k[0]==="#"){k=k.slice(1);i=h.getElementById(k)}else{i=h.getElementsByTagName(k);if(i.length){i=i[0]}else{i=null}}}if(i){return e(i)}else{return null}};b.prototype.selectAll=function(o,n){var h=[];var l;var i=g(n);if(o[0]==="."){o=o.slice(1);l=i.getElementsByClassName(o)}else{l=i.getElementsByTagName(o)}if(l){for(var k=0;k<l.length;k++){var m=e(l[k]);h.push(m)}}return h};function g(i){var h=document;if(typeof i==="string"&&i[0]==="#"){i=i.slice(1);h=document.getElementById(i)||document}else{if(i instanceof b.Element){h=i.elt}else{if(i instanceof HTMLElement){h=i}}}return h}function e(h){if(h.tagName==="INPUT"&&h.type==="checkbox"){var i=new b.Element(h);i.checked=function(){if(arguments.length===0){return this.elt.checked}else{if(arguments[0]){this.elt.checked=true}else{this.elt.checked=false}}return this};return i}else{if(h.tagName==="VIDEO"||h.tagName==="AUDIO"){return new b.MediaElement(h)}else{return new b.Element(h)}}}b.prototype.removeElements=function(j){for(var h=0;h<this._elements.length;h++){if(!(this._elements[h].elt instanceof HTMLCanvasElement)){this._elements[h].remove()}}};function d(h,i,k){var j=i._userNode?i._userNode:document.body;j.appendChild(h);var l=k?new b.MediaElement(h):new b.Element(h);i._elements.push(l);return l}var a=["div","p","span"];a.forEach(function(h){var i="create"+h.charAt(0).toUpperCase()+h.slice(1);b.prototype[i]=function(k){var j=document.createElement(h);j.innerHTML=typeof k===undefined?"":k;return d(j,this)}});b.prototype.createImg=function(){var j=document.createElement("img");var i=arguments;var h;var k=function(){h.width=j.offsetWidth;h.height=j.offsetHeight;if(i.length>1&&typeof i[1]==="function"){h.fn=i[1];h.fn()}else{if(i.length>1&&typeof i[2]==="function"){h.fn=i[2];h.fn()}}};j.src=i[0];if(i.length>1&&typeof i[1]==="string"){j.alt=i[1]}j.onload=function(){k()};h=d(j,this);return h};b.prototype.createA=function(h,j,k){var i=document.createElement("a");i.href=h;i.innerHTML=j;if(k){i.target=k}return d(i,this)};b.prototype.createSlider=function(j,h,l,k){var i=document.createElement("input");i.type="range";i.min=j;i.max=h;if(k){i.step=k}if(typeof(l)==="number"){i.value=l}return d(i,this)};b.prototype.createButton=function(i,j){var h=document.createElement("button");h.innerHTML=i;h.value=j;if(j){h.value=j}return d(h,this)};b.prototype.createCheckbox=function(){var k=document.createElement("input");k.type="checkbox";var i=d(k,this);i.checked=function(){if(arguments.length===0){return i.elt.checked}else{if(arguments[0]){i.elt.checked=true}else{i.elt.checked=false}}return i};this.value=function(l){i.value=l;return this};if(arguments[0]){var h=Math.random().toString(36).slice(2);var j=document.createElement("label");k.setAttribute("id",h);j.htmlFor=h;i.value(arguments[0]);j.appendChild(document.createTextNode(arguments[0]));d(j,this)}if(arguments[1]){k.checked=true}return i};b.prototype.createSelect=function(j){var i=document.createElement("select");if(j){i.setAttribute("multiple","true")}var h=d(i,this);h.option=function(k,m){var l=document.createElement("option");l.innerHTML=k;if(arguments.length>1){l.value=m}else{l.value=k}i.appendChild(l)};h.selected=function(m){var k=[];if(arguments.length>0){for(var l=0;l<this.elt.length;l++){if(m.toString()===this.elt[l].value){this.elt.selectedIndex=l}}return this}else{if(j){for(var l=0;l<this.elt.selectedOptions.length;l++){k.push(this.elt.selectedOptions[l].value)}return k}else{return this.elt.value}}};return h};b.prototype.createRadio=function(){var p=document.querySelectorAll("input[type=radio]");var n=0;if(p.length>1){console.log(p,p[0].name);var j=p.length;var k=p[0].name;var o=p[1].name;n=1;for(var m=1;m<j;m++){o=p[m].name;if(k!=o){n++}k=o}}else{if(p.length==1){n=1}}var l=document.createElement("div");var q=d(l,this);var h=-1;q.option=function(s,u){var t=document.createElement("input");t.type="radio";t.innerHTML=s;if(arguments.length>1){t.value=u}else{t.value=s}t.setAttribute("name","defaultradio"+n);l.appendChild(t);if(s){h++;var i=Math.random().toString(36).slice(2);var r=document.createElement("label");t.setAttribute("id","defaultradio"+n+"-"+h);r.htmlFor="defaultradio"+n+"-"+h;r.appendChild(document.createTextNode(s));l.appendChild(r)}return t};q.selected=function(){var s=this.elt.childNodes.length;if(arguments[0]){for(var r=0;r<s;r+=2){if(this.elt.childNodes[r].value==arguments[0]){this.elt.childNodes[r].checked=true}}return this}else{for(var r=0;r<s;r+=2){if(this.elt.childNodes[r].checked==true){return this.elt.childNodes[r].value}}}};q.value=function(){var s=this.elt.childNodes.length;if(arguments[0]){for(var r=0;r<s;r+=2){if(this.elt.childNodes[r].value==arguments[0]){this.elt.childNodes[r].checked=true}}return this}else{for(var r=0;r<s;r+=2){if(this.elt.childNodes[r].checked==true){return this.elt.childNodes[r].value}}return""}};return q};b.prototype.createInput=function(i){var h=document.createElement("input");h.type="text";if(i){h.value=i}return d(h,this)};b.prototype.createFileInput=function(k,h){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var i=document.createElement("input");i.type="file";if(h){i.multiple="multiple"}function j(m){var p=m.target.files;for(var o=0;o<p.length;o++){var q=p[o];var l=new FileReader();function n(s){var r=new b.File(s);return function(t){r.data=t.target.result;k(r)}}l.onload=n(q);if(q.type.indexOf("text")>-1){l.readAsText(q)}else{l.readAsDataURL(q)}}}i.addEventListener("change",j,false);return d(i,this)}else{console.log("The File APIs are not fully supported in this browser. Cannot create element.")}};function f(k,p,h,q){var m=document.createElement(p);if(typeof h==="string"){h=[h]}for(var n=0;n<h.length;n++){var j=document.createElement("source");j.src=h[n];m.appendChild(j)}if(typeof q!=="undefined"){var l=function(){q();m.removeEventListener("canplaythrough",l)};m.addEventListener("canplaythrough",l)}var o=d(m,k,true);o.loadedmetadata=false;m.addEventListener("loadedmetadata",function(){o.width=m.videoWidth;o.height=m.videoHeight;o.loadedmetadata=true});return o}b.prototype.createVideo=function(h,i){return f(this,"video",h,i)};b.prototype.createAudio=function(h,i){return f(this,"audio",h,i)};b.prototype.VIDEO="video";b.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;b.prototype.createCapture=function(){var m=true;var l=true;var o;var h;for(var k=0;k<arguments.length;k++){if(arguments[k]===b.prototype.VIDEO){l=false}else{if(arguments[k]===b.prototype.AUDIO){m=false}else{if(typeof arguments[k]==="object"){o=arguments[k]}else{if(typeof arguments[k]==="function"){h=arguments[k]}}}}}if(navigator.getUserMedia){var j=document.createElement("video");if(!o){o={video:m,audio:l}}navigator.getUserMedia(o,function(i){j.src=window.URL.createObjectURL(i);j.onloadedmetadata=function(p){j.play();if(h){h(i)}}},function(i){console.log(i)})}else{throw"getUserMedia not supported in this browser"}var n=d(j,this,true);n.loadedmetadata=false;j.addEventListener("loadedmetadata",function(){n.width=j.videoWidth;n.height=j.videoHeight;n.loadedmetadata=true});return n};b.prototype.createElement=function(h,j){var i=document.createElement(h);if(typeof j!=="undefined"){i.innerHTML=j}return d(i,this)};b.Element.prototype.addClass=function(h){if(this.elt.className){this.elt.className=this.elt.className+" "+h}else{this.elt.className=h}return this};b.Element.prototype.removeClass=function(i){var h=new RegExp("(?:^|\\s)"+i+"(?!\\S)");this.elt.className=this.elt.className.replace(h,"");this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,"");return this};b.Element.prototype.child=function(h){if(typeof h==="string"){if(h[0]==="#"){h=h.substring(1)}h=document.getElementById(h)}else{if(h instanceof b.Element){h=h.elt}}this.elt.appendChild(h);return this};b.Element.prototype.center=function(m){var h=this.elt.style.display;var l=this.elt.style.display==="none";var k=this.parent().style.display==="none";var n={x:this.elt.offsetLeft,y:this.elt.offsetTop};if(l){this.show()}this.elt.style.display="block";this.position(0,0);if(k){this.parent().style.display="block"}var j=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth);var i=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);var o=n.y;var p=n.x;if(m==="both"||m===undefined){this.position(j/2,i/2)}else{if(m==="horizontal"){this.position(j/2,o)}else{if(m==="vertical"){this.position(p,i/2)}}}this.style("display",h);if(l){this.hide()}if(k){this.parent().style.display="none"}return this};b.Element.prototype.html=function(h){if(typeof h!=="undefined"){this.elt.innerHTML=h;return this}else{return this.elt.innerHTML}};b.Element.prototype.position=function(){if(arguments.length===0){return{x:this.elt.offsetLeft,y:this.elt.offsetTop}}else{this.elt.style.position="absolute";this.elt.style.left=arguments[0]+"px";this.elt.style.top=arguments[1]+"px";this.x=arguments[0];this.y=arguments[1];return this}};b.Element.prototype.translate=function(){this.elt.style.position="absolute";if(arguments.length===2){var h=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");h=h.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)";this.elt.style.transform+=h}else{if(arguments.length===3){var h=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");h=h.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)";this.elt.style.transform+=h;this.elt.parentElement.style.perspective="1000px"}else{if(arguments.length===4){var h=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");h=h.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)";this.elt.style.transform+=h;this.elt.parentElement.style.perspective=arguments[3]+"px"}}}return this};b.Element.prototype.rotate=function(){if(arguments.length===1){var h=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");h=h.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotate("+arguments[0]+"deg)";this.elt.style.transform+=h}else{if(arguments.length===2){var h=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");h=h.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)";this.elt.style.transform+=h}else{if(arguments.length===3){var h=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");h=h.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotateX("+arguments[0]+"deg)";this.elt.style.transform+="rotateY("+arguments[1]+"deg)";this.elt.style.transform+="rotateZ("+arguments[2]+"deg)";this.elt.style.transform+=h}}}return this};b.Element.prototype.style=function(h,k){var q=this;if(k instanceof b.Color){k="rgba("+k.levels[0]+","+k.levels[1]+","+k.levels[2]+","+k.levels[3]/255+")"}if(typeof k==="undefined"){if(h.indexOf(":")===-1){var p=window.getComputedStyle(q.elt);var j=p.getPropertyValue(h);return j}else{var o=h.split(";");for(var n=0;n<o.length;n++){var m=o[n].split(":");if(m[0]&&m[1]){this.elt.style[m[0].trim()]=m[1].trim()}}}}else{if(h==="rotate"){if(arguments.length===2){var j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");j=j.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotate("+arguments[0]+"deg)";this.elt.style.transform+=j}else{if(arguments.length===3){var j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");j=j.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)";this.elt.style.transform+=j}else{if(arguments.length===4){var j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");j=j.replace(/rotate[X-Z]?\(.*\)/g,"");this.elt.style.transform="rotateX("+arguments[0]+"deg)";this.elt.style.transform+="rotateY("+arguments[1]+"deg)";this.elt.style.transform+="rotateZ("+arguments[2]+"deg)";this.elt.style.transform+=j}}}}else{if(h==="translate"){if(arguments.length===3){var j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");j=j.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)";this.elt.style.transform+=j}else{if(arguments.length===4){var j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");j=j.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)";this.elt.style.transform+=j;this.elt.parentElement.style.perspective="1000px"}else{if(arguments.length===5){var j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"");j=j.replace(/translate[X-Z]?\(.*\)/g,"");this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)";this.elt.style.transform+=j;this.elt.parentElement.style.perspective=arguments[3]+"px"}}}}else{if(h==="position"){this.elt.style.left=arguments[1]+"px";this.elt.style.top=arguments[2]+"px";this.x=arguments[1];this.y=arguments[2]}else{this.elt.style[h]=k;if(h==="width"||h==="height"||h==="left"||h==="top"){var l=k.replace(/\D+/g,"");this[h]=parseInt(l,10)}}}}}return this};b.Element.prototype.attribute=function(h,i){if(typeof i==="undefined"){return this.elt.getAttribute(h)}else{this.elt.setAttribute(h,i);return this}};b.Element.prototype.value=function(){if(arguments.length>0){this.elt.value=arguments[0];return this}else{if(this.elt.type==="range"){return parseFloat(this.elt.value)}else{return this.elt.value}}};b.Element.prototype.show=function(){this.elt.style.display="block";return this};b.Element.prototype.hide=function(){this.elt.style.display="none";return this};b.Element.prototype.size=function(l,p){if(arguments.length===0){return{width:this.elt.offsetWidth,height:this.elt.offsetHeight}}else{var q=l;var i=p;var o=b.prototype.AUTO;if(q!==o||i!==o){if(q===o){q=p*this.width/this.height}else{if(i===o){i=l*this.height/this.width}}if(this.elt instanceof HTMLCanvasElement){var n={};var m=this.elt.getContext("2d");for(var r in m){n[r]=m[r]}this.elt.setAttribute("width",q*this._pInst._pixelDensity);this.elt.setAttribute("height",i*this._pInst._pixelDensity);this.elt.setAttribute("style","width:"+q+"px; height:"+i+"px");this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var r in n){this.elt.getContext("2d")[r]=n[r]}}else{this.elt.style.width=q+"px";this.elt.style.height=i+"px";this.elt.width=q;this.elt.height=i;this.width=q;this.height=i}this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;if(this._pInst){if(this._pInst._curElement.elt===this.elt){this._pInst._setProperty("width",this.elt.offsetWidth);this._pInst._setProperty("height",this.elt.offsetHeight)}}}return this}};b.Element.prototype.remove=function(){for(var h in this._events){this.elt.removeEventListener(h,this._events[h])}if(this.elt.parentNode){this.elt.parentNode.removeChild(this.elt)}delete (this)};b.MediaElement=function(h,i){b.Element.call(this,h,i);this._prevTime=0;this._cueIDCounter=0;this._cues=[];this._pixelDensity=1};b.MediaElement.prototype=Object.create(b.Element.prototype);b.MediaElement.prototype.play=function(){if(this.elt.currentTime===this.elt.duration){this.elt.currentTime=0}if(this.elt.readyState>1){this.elt.play()}else{this.elt.load();this.elt.play()}return this};b.MediaElement.prototype.stop=function(){this.elt.pause();this.elt.currentTime=0;return this};b.MediaElement.prototype.pause=function(){this.elt.pause();return this};b.MediaElement.prototype.loop=function(){this.elt.setAttribute("loop",true);this.play();return this};b.MediaElement.prototype.noLoop=function(){this.elt.setAttribute("loop",false);return this};b.MediaElement.prototype.autoplay=function(h){this.elt.setAttribute("autoplay",h);return this};b.MediaElement.prototype.volume=function(h){if(typeof h==="undefined"){return this.elt.volume}else{this.elt.volume=h}};b.MediaElement.prototype.time=function(h){if(typeof h==="undefined"){return this.elt.currentTime}else{this.elt.currentTime=h}};b.MediaElement.prototype.duration=function(){return this.elt.duration};b.MediaElement.prototype.pixels=[];b.MediaElement.prototype.loadPixels=function(){if(this.loadedmetadata){if(!this.canvas){this.canvas=document.createElement("canvas");this.drawingContext=this.canvas.getContext("2d")}if(this.canvas.width!==this.elt.width){this.canvas.width=this.elt.width;this.canvas.height=this.elt.height;this.width=this.canvas.width;this.height=this.canvas.height}this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height);b.Renderer2D.prototype.loadPixels.call(this)}return this};b.MediaElement.prototype.updatePixels=function(i,l,j,k){if(this.loadedmetadata){b.Renderer2D.prototype.updatePixels.call(this,i,l,j,k)}return this};b.MediaElement.prototype.get=function(i,l,j,k){if(this.loadedmetadata){return b.Renderer2D.prototype.get.call(this,i,l,j,k)}else{return[0,0,0,255]}};b.MediaElement.prototype.set=function(h,j,i){if(this.loadedmetadata){b.Renderer2D.prototype.set.call(this,h,j,i)}};b.MediaElement.prototype.connect=function(j){var k,h;if(typeof b.prototype.getAudioContext==="function"){k=b.prototype.getAudioContext();h=b.soundOut.input}else{try{k=j.context;h=k.destination}catch(i){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}}if(!this.audioSourceNode){this.audioSourceNode=k.createMediaElementSource(this.elt);this.audioSourceNode.connect(h)}if(j){if(j.input){this.audioSourceNode.connect(j.input)}else{this.audioSourceNode.connect(j)}}else{this.audioSourceNode.connect(h)}};b.MediaElement.prototype.disconnect=function(){if(this.audioSourceNode){this.audioSourceNode.disconnect()}else{throw"nothing to disconnect"}};b.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit";this.elt.controls=true};b.MediaElement.prototype.hideControls=function(){this.elt.controls=false};b.MediaElement.prototype.addCue=function(i,l,j){var k=this._cueIDCounter++;var h=new c(l,i,k,j);this._cues.push(h);if(!this.elt.ontimeupdate){this.elt.ontimeupdate=this._onTimeUpdate.bind(this)}return k};b.MediaElement.prototype.removeCue=function(k){for(var j=0;j<this._cues.length;j++){var h=this._cues[j];if(h.id===k){this.cues.splice(j,1)}}if(this._cues.length===0){this.elt.ontimeupdate=null}};b.MediaElement.prototype.clearCues=function(){this._cues=[];this.elt.ontimeupdate=null};b.MediaElement.prototype._onTimeUpdate=function(){var l=this.time();for(var j=0;j<this._cues.length;j++){var h=this._cues[j].time;var k=this._cues[j].val;if(this._prevTime<h&&h<=l){this._cues[j].callback(k)}}this._prevTime=l};var c=function(k,h,j,i){this.callback=k;this.time=h;this.id=j;this.val=i};b.File=function(h,i){this.file=h;this._pInst=i;var j=h.type.split("/");this.type=j[0];this.subtype=j[1];this.name=h.name;this.size=h.size;this.data=undefined}}));